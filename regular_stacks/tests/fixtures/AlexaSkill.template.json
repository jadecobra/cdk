{
 "Parameters": {
  "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3Bucket159DC244": {
   "Type": "String",
   "Description": "S3 bucket for asset \"0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078\""
  },
  "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3VersionKeyEB3C4EA0": {
   "Type": "String",
   "Description": "S3 key for asset version \"0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078\""
  },
  "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078ArtifactHashA55498B5": {
   "Type": "String",
   "Description": "Artifact hash for asset \"0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078\""
  },
  "AssetParameterse6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35bS3BucketAAE6C2BD": {
   "Type": "String",
   "Description": "S3 bucket for asset \"e6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35b\""
  },
  "AssetParameterse6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35bS3VersionKey67898CCC": {
   "Type": "String",
   "Description": "S3 key for asset version \"e6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35b\""
  },
  "AssetParameterse6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35bArtifactHash21ADCC96": {
   "Type": "String",
   "Description": "Artifact hash for asset \"e6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35b\""
  }
 },
 "Resources": {
  "Role1ABCC5F0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "alexa-appkit.amazon.com"
       }
      },
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudformation.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   }
  },
  "RoleDefaultPolicy5FFB7DAB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "S3:GetObject",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:s3:::",
          {
           "Ref": "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3Bucket159DC244"
          },
          "/",
          {
           "Fn::Select": [
            0,
            {
             "Fn::Split": [
              "||",
              {
               "Ref": "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3VersionKeyEB3C4EA0"
              }
             ]
            }
           ]
          },
          {
           "Fn::Select": [
            1,
            {
             "Fn::Split": [
              "||",
              {
               "Ref": "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3VersionKeyEB3C4EA0"
              }
             ]
            }
           ]
          }
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RoleDefaultPolicy5FFB7DAB",
    "Roles": [
     {
      "Ref": "Role1ABCC5F0"
     }
    ]
   }
  },
  "Users0A0EEA89": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "KeySchema": [
     {
      "AttributeName": "userId",
      "KeyType": "HASH"
     }
    ],
    "AttributeDefinitions": [
     {
      "AttributeName": "userId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "AlexaLambdaHandlerServiceRoleA4811424": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   }
  },
  "AlexaLambdaHandlerServiceRoleDefaultPolicy8BC5130A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "Users0A0EEA89",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AlexaLambdaHandlerServiceRoleDefaultPolicy8BC5130A",
    "Roles": [
     {
      "Ref": "AlexaLambdaHandlerServiceRoleA4811424"
     }
    ]
   }
  },
  "AlexaLambdaHandler6FAFE38D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Ref": "AssetParameterse6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35bS3BucketAAE6C2BD"
     },
     "S3Key": {
      "Fn::Join": [
       "",
       [
        {
         "Fn::Select": [
          0,
          {
           "Fn::Split": [
            "||",
            {
             "Ref": "AssetParameterse6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35bS3VersionKey67898CCC"
            }
           ]
          }
         ]
        },
        {
         "Fn::Select": [
          1,
          {
           "Fn::Split": [
            "||",
            {
             "Ref": "AssetParameterse6c794c5066ea0fe103167916d0dbfe527f7ee63a040fa48795abc589fbaf35bS3VersionKey67898CCC"
            }
           ]
          }
         ]
        }
       ]
      ]
     }
    },
    "Role": {
     "Fn::GetAtt": [
      "AlexaLambdaHandlerServiceRoleA4811424",
      "Arn"
     ]
    },
    "Environment": {
     "Variables": {
      "USERS_TABLE": {
       "Ref": "Users0A0EEA89"
      }
     }
    },
    "Handler": "alexa_skill.handler",
    "Runtime": "python3.9"
   },
   "DependsOn": [
    "AlexaLambdaHandlerServiceRoleDefaultPolicy8BC5130A",
    "AlexaLambdaHandlerServiceRoleA4811424"
   ]
  },
  "AlexaLambdaHandlerAlexaPermissionA372D625": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AlexaLambdaHandler6FAFE38D",
      "Arn"
     ]
    },
    "Principal": "alexa-appkit.amazon.com"
   }
  },
  "thealexaskill": {
   "Type": "Alexa::ASK::Skill",
   "Properties": {
    "AuthenticationConfiguration": {
     "ClientId": "",
     "ClientSecret": "",
     "RefreshToken": ""
    },
    "SkillPackage": {
     "Overrides": {
      "Manifest": {
       "apis": {
        "custom": {
         "endpoint": {
          "uri": {
           "Fn::GetAtt": [
            "AlexaLambdaHandler6FAFE38D",
            "Arn"
           ]
          }
         }
        }
       }
      }
     },
     "S3Bucket": {
      "Ref": "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3Bucket159DC244"
     },
     "S3BucketRole": {
      "Fn::GetAtt": [
       "Role1ABCC5F0",
       "Arn"
      ]
     },
     "S3Key": {
      "Fn::Join": [
       "",
       [
        {
         "Fn::Select": [
          0,
          {
           "Fn::Split": [
            "||",
            {
             "Ref": "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3VersionKeyEB3C4EA0"
            }
           ]
          }
         ]
        },
        {
         "Fn::Select": [
          1,
          {
           "Fn::Split": [
            "||",
            {
             "Ref": "AssetParameters0f09cac26d035461320999ffc92d16ae2c42fc2f76034b89f72f172a54464078S3VersionKeyEB3C4EA0"
            }
           ]
          }
         ]
        }
       ]
      ]
     }
    },
    "VendorId": ""
   }
  }
 }
}